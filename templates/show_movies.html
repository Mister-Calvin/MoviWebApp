{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1>🎞️{{ user.name }}´s favorite Movies</h1>


    {% if movies %}
        <ul class="movie-list">
    {% for movie in movies %}
    <li class="movie-item">
        <div class="movie-info">
            <img src="{{ movie.poster_url }}" width="100" alt="{{ movie.name }}">
            <div class="movie-details">
                <strong>{{ movie.name }}</strong> ({{ movie.year }})<br>
                <em>Directed by:</em> {{ movie.director }}
            </div>
        </div>

        <div class="movie-actions">
            <!-- Update Form -->
            <form action="{{ url_for('update_movie', user_id=user.id, movie_id=movie.id) }}" method="POST" class="update-form">
                <input type="text" name="new_name" placeholder="New title..." required>
                <button type="submit">✏️ Update</button>
            </form>

            <!-- Delete Form -->
            <form action="{{ url_for('delete_movie', user_id=user.id, movie_id=movie.id) }}" method="POST" class="delete-form">
                <button type="submit" onclick="return confirm('Delete this movie?')">🗑️ Delete</button>
            </form>
        </div>
    </li>
    {% endfor %}
</ul>
    {% else %}
        <p>No movies found for this user.</p>
    {% endif %}
    <h2>➕ Add New Movie</h2>
    <form action="{{ url_for('list_movies', user_id=user.id) }}" method="POST" class="add-user-form">
        <input type="text" name="name" placeholder="Enter name..." required>
        <button type="submit">Add Movie 🚀</button>
    </form>

    <div class="back-link">
        <a href="{{ url_for('home') }}">⬅️ Back to Home</a>
    </div>
</div>
{% endblock %}